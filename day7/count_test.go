package main

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestCountSplits_happy(t *testing.T) {
	d := parse([]string{
		".......S.......",
		"...............",
		".......^.......",
		"...............",
		"......^.^......",
		"...............",
		".....^.^.^.....",
		"...............",
		"....^.^...^....",
		"...............",
		"...^.^...^.^...",
		"...............",
		"..^...^.....^..",
		"...............",
		".^.^.^.^.^...^.",
		"...............",
	})

	splits, _ := countSplits(d)

	assert.Equal(t, 21, splits)

}

func TestCountTimelines_happy(t *testing.T) {
	d := parse([]string{
		".......S.......",
		"...............",
		".......^.......",
		"...............",
		"......^.^......",
		"...............",
		".....^.^.^.....",
		"...............",
		"....^.^...^....",
		"...............",
		"...^.^...^.^...",
		"...............",
		"..^...^.....^..",
		"...............",
		".^.^.^.^.^...^.",
		"...............",
	})

	_, beams := countSplits(d)

	assert.Equal(t, 40, countTimelines(beams))
}
